Раздел  | Пояснение 
------- | --------
Краткое описание инцидента   | В 22:52 21.10.18 в следствие аварии на оборудовании основного канала связи были затронуты некоторые службы GitHub.В результатае возникла несогласованность информации на сервисах (данных). Произошла деградация сервиса в тесении 24 часов и 11 минут.
Предшествующие события   | Произошла авария на основном 100G канале связи между US East cost DC и каким то Хабом того же побережья.Переход на резервный канал произошёл за 43 секунды чего окозалось слишком много для такой высоконагруженной системы
Причина инцидента   | Как я понял за 43 секунды репликации данных на кластерах Восточного побережья отставала от репликации на западном.
Воздействие   |   Несогласованность предоставляемой информации (отображение не актуальной информации). Невозможность работы событий WebHook и недоступность работы страниц GitHub
Обнаружение   |   Обнаружено инженерами отдела монторинга
Реакция   |  Дежурные инженеры отрабатывали алерты. План состоял в том, чтобы восстановить из резервных копий, синхронизировать реплики на обоих сайтах, вернуться к стабильной топологии обслуживания, а затем возобновить обработку заданий в очереди. 
Таймлайн   |   2018.10.21 22:52 UTC - потеря консенсуса между сереврами в дата хабах в результате описанного инцидента. После восстановления была попытка восстановления целостности кластера, восстановления консенсуса, но данные в БД различялись что привело к несогласованности в рамках кластера.<br>2018.10.21 22:54 UTC   Мониторинг генерировал Алерты, инженера поддержки обрабатывали реагировали на алерты, в 23:02 обнаружили несоответсвие статуса Кластера ожиаемому. Выявлено отсутсвие серверов из US East Coast<br>2018.10.21 23:07 UTC - отключен внутренние инструменны развертывания для предотвращения дополнительных имзменй. Сайт переведен в желтый статус и автомтически зафикисрован инциден в системе управления сбоями<br>2018.10.21 23:13 UTC - после выявления воздействия на множественные сервера , выведены дополнительные инженеры, выпонены действия для сохраненияпользоательских данных. но деградация системы не была остановлена<br>2018.10.21 23:19 UTC - Были остановлены некоторые процессы (принудительная деградация системы) с целью повышения скорости восстановления<br>2018.10.22 00:05 UTC - Разработка плана по восстановления системы и синхронизаии репликаций данных. Обновлен статус, чтобы сообщить пользователям, что мы собираемся выполнить контролируемую отработку отказа внутренней системы хранения данных.<br>2018.10.22 00:41 UTC - Запущен процесс бэкопирования данных, мониторинг состяния работ<br>2018.10.22 06:51 UTC - бэкапы выаолнены US East Coast data center и запущенно реплецирование с серверов в West Coast.<br>2018.10.22 07:46 UTC - опубликована расширенная информация для пользователей<br>2018.10.22 11:12 UTC - Востановлены сервера в US East Coast, продолжается реплицирование. наблюдается повышенная нагрузка при реплицировании.<br>2018.10.22 13:15 UTC - Приближались к пиковому периоду нагрузок. Увеличили количество репликаций для снятия растущей нагрузки по реплицированию.<br>2018.10.22 16:24 UTC - реплицированиее синхронизировано, переключение в штатную топологию MySQL<br>2018.10.22 16:45 UTC - После восстановления возникла необходимость балансировки нагрузки да восстановления 100% услуг клиентам. Для восстановления уже имеющихся данных пользователей включили обработку, так же подняли TTL до полного завершения и возвращения к штатной работе.<br>2018.10.22 23:03 UTC - Работа возвращена к штатному режиму
Восстановление   |  Восстановление работоспособности было выполнено за счет восстановления данных из бэкапов и многократных репликаций всех имеющихся данных с хостов с актуальными данными для восстановления 100% целостности данных во всех кластерах хранения данных.
Последующие действия   |  Настройка конфигурациии Оркестратора для снижения рисков поведения вызвашего инцидент<br>Изменить скорость сбора информации для эффективного взаимодествия/ изменен способ сбора и передачи информации<br>запланировано изменение топологии репликации на active/active/active<br>Так же запланирован ряд других иннициатив для повышения ээфективности работы системыи и снижения риска потери работоспособности системы
